(()=>{var tt=Object.create;var j=Object.defineProperty,rt=Object.defineProperties,nt=Object.getOwnPropertyDescriptor,ot=Object.getOwnPropertyDescriptors,st=Object.getOwnPropertyNames,de=Object.getOwnPropertySymbols,at=Object.getPrototypeOf,ue=Object.prototype.hasOwnProperty,it=Object.prototype.propertyIsEnumerable;var _e=(e,t,n)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f=(e,t)=>{for(var n in t||={})ue.call(t,n)&&_e(e,n,t[n]);if(de)for(var n of de(t))it.call(t,n)&&_e(e,n,t[n]);return e},h=(e,t)=>rt(e,ot(t));var lt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ct=(e,t)=>{for(var n in t)j(e,n,{get:t[n],enumerable:!0})},me=(e,t,n,l)=>{if(t&&typeof t=="object"||typeof t=="function")for(let d of st(t))!ue.call(e,d)&&d!==n&&j(e,d,{get:()=>t[d],enumerable:!(l=nt(t,d))||l.enumerable});return e};var s=(e,t,n)=>(n=e!=null?tt(at(e)):{},me(t||!e||!e.__esModule?j(n,"default",{value:e,enumerable:!0}):n,e)),dt=e=>me(j({},"__esModule",{value:!0}),e);var m=(e,t,n)=>new Promise((l,d)=>{var r=u=>{try{c(n.next(u))}catch(v){d(v)}},a=u=>{try{c(n.throw(u))}catch(v){d(v)}},c=u=>u.done?l(u.value):Promise.resolve(u.value).then(r,a);c((n=n.apply(e,t)).next())});var o=lt((Gt,pe)=>{pe.exports=shelter.solidWeb});var Yt={};ct(Yt,{onUnload:()=>Vt});var ge=s(o(),1),ve=s(o(),1),$e=s(o(),1),E=s(o(),1),b=s(o(),1);var fe="._tophead_5o4a7_1{margin-bottom:16px}._shead_5o4a7_1{margin-top:32px;margin-bottom:8px}._pbuttons_5o4a7_1{display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:100%;margin-top:16px}",D={tophead:"_tophead_5o4a7_1",shead:"_shead_5o4a7_1",pbuttons:"_pbuttons_5o4a7_1"};var _t=(0,ge.template)("<div></div>",2),{ui:{injectCss:ut,openConfirmationModal:mt,ModalRoot:Qt,ModalHeader:Xt,ModalBody:er,ModalFooter:tr,SwitchItem:V,Button:Y,ButtonLooks:rr,Header:q,HeaderTags:pt,showToast:ft},solid:{createSignal:ht,createEffect:gt}}=shelter,{invoke:O,process:vt}=window.__TAURI__,he=!1;function be(){let[e,t]=ht({cache_css:!1,streamer_mode_detection:!1,rpc_server:!1});he||(he=!0,ut(fe)),gt(()=>m(this,null,function*(){let r=yield O("read_config_file"),a=yield O("default_config");try{t(JSON.parse(r))}catch(c){t(JSON.parse(a))}}));let n=()=>m(this,null,function*(){yield O("write_config_file",{contents:JSON.stringify(e())}),vt.relaunch()}),l=()=>m(this,null,function*(){yield O("clear_css_cache"),ft({title:"CSS Cache Cleared",duration:3e3})}),d=()=>{mt({body:()=>`
      Clearing web cache will log you out and reset your settings, but can often help solve permission-based issues.
      


      Do you want to proceed?
      `,header:()=>"Are you sure?",type:"neutral",confirmText:"Confirm"}).then(()=>O("set_clear_cache"),()=>{})};return[(0,b.createComponent)(q,{get tag(){return pt.H1},get class(){return D.tophead},children:"Dorion Performance Settings"}),(0,b.createComponent)(q,{get class(){return D.shead},children:"Cache"}),(0,b.createComponent)(V,{get value(){return e().cache_css},onChange:r=>t(h(f({},e()),{cache_css:r})),note:"Save CSS to disk that would otherwise be loaded from the web, decreasing load times.",children:"Cache CSS"}),(0,b.createComponent)(q,{get class(){return D.shead},children:"Optional Features"}),(0,b.createComponent)(V,{get value(){return e().streamer_mode_detection},onChange:r=>t(h(f({},e()),{streamer_mode_detection:r})),note:"Detect OBS and Streamlabs OBS and automatically enable streamer mode when they are running.",children:"Streamer Mode detection"}),(0,b.createComponent)(V,{get value(){return e().rpc_server},onChange:r=>t(h(f({},e()),{rpc_server:r})),tooltipNote:"This is a work in progress, and won't do EVERYTHING arRPC does quite yet.",note:"Enable the integrated RPC server, eliminating the need for a separate arRPC server running. Remember to enable the arRPC plugin!",children:"Integrated rich presence server"}),(()=>{let r=_t.cloneNode(!0);return(0,E.insert)(r,(0,b.createComponent)(Y,{onClick:n,style:{width:"30%",padding:"18px"},grow:!0,children:"Save and Restart"}),null),(0,E.insert)(r,(0,b.createComponent)(Y,{onClick:d,style:{width:"30%",padding:"18px"},grow:!0,children:"Clear WebData Cache"}),null),(0,E.insert)(r,(0,b.createComponent)(Y,{onClick:l,style:{width:"30%",padding:"18px"},s:!0,grow:!0,children:"Clear CSS Cache"}),null),(0,$e.effect)(()=>(0,ve.className)(r,D.pbuttons)),r})()]}var De=s(o(),1),Oe=s(o(),1),Ae=s(o(),1),Q=s(o(),1),_r=s(o(),1),y=s(o(),1);var Z=s(o(),1),B=s(o(),1),G=s(o(),1),ze=s(o(),1),F=s(o(),1),Ne=s(o(),1),A=s(o(),1);var we="._ddown_ccz23_1{box-sizing:border-box;font-size:16px;width:100%;border-radius:3px;color:var(--text-normal);background-color:var(--input-background);border:none;transition:border-color .2s ease-in-out;padding:10px;appearance:none;cursor:pointer}._dcontainer_ccz23_1{position:relative;width:100%}._dsarrow_ccz23_1{position:absolute;right:10px;top:50%;transform:translateY(-50%);pointer-events:none}._dsarrow_ccz23_1 path{fill:var(--text-secondary)}",M={ddown:"_ddown_ccz23_1",dcontainer:"_dcontainer_ccz23_1",dsarrow:"_dsarrow_ccz23_1"};var xe=s(o(),1),ye=s(o(),1),Ce=s(o(),1),$t=(0,xe.template)('<svg aria-hidden="true" role="img" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M16.59 8.59003L12 13.17L7.41 8.59003L6 10L12 16L18 10L16.59 8.59003Z"></path></svg>',4),Se=e=>(()=>{let t=$t.cloneNode(!0);return(0,Ce.effect)(()=>(0,ye.setAttribute)(t,"class",e.class)),t})();var bt=(0,Z.template)("<div><select></select></div>",4),wt=(0,Z.template)("<option></option>",2),{ui:{injectCss:xt}}=shelter,Pe=!1,I=e=>(Pe||(Pe=!0,xt(we)),(()=>{let t=bt.cloneNode(!0),n=t.firstChild;return(0,Ne.addEventListener)(n,"change",e.onChange),(0,F.insert)(n,()=>{var l;return(l=e.options)==null?void 0:l.map(d=>(()=>{let r=wt.cloneNode(!0);return(0,F.insert)(r,()=>d.label),(0,A.effect)(()=>r.selected=d.value===(e==null?void 0:e.selected)),(0,A.effect)(()=>r.value=d.value),r})())}),(0,F.insert)(t,(0,ze.createComponent)(Se,{get class(){return M.dsarrow}}),null),(0,A.effect)(l=>{let d=M.dcontainer,r=M.ddown,a=e.placeholder,c=e.id,u=e["aria-label"];return d!==l._v$&&(0,G.className)(t,l._v$=d),r!==l._v$2&&(0,G.className)(n,l._v$2=r),a!==l._v$3&&(0,B.setAttribute)(n,"placeholder",l._v$3=a),c!==l._v$4&&(0,B.setAttribute)(n,"id",l._v$4=c),u!==l._v$5&&(0,B.setAttribute)(n,"aria-label",l._v$5=u),l},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),(0,A.effect)(()=>n.value=e.value),t})());var ke="._shead_15ahn_1{margin-top:32px;margin-bottom:8px}._sbutton_15ahn_1{margin-top:16px;padding:18px;width:100%}._splitbutton_15ahn_1{width:45%}._pbuttons_15ahn_1{display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:100%;margin-top:16px}",k={shead:"_shead_15ahn_1",sbutton:"_sbutton_15ahn_1",splitbutton:"_splitbutton_15ahn_1",pbuttons:"_pbuttons_15ahn_1"};var yt=(0,De.template)("<div></div>",2),{invoke:T,process:Ct}=window.__TAURI__,{ui:{Header:Te,Button:K,HeaderTags:St,TextBox:Pt,injectCss:zt},solid:{createSignal:J,createEffect:Nt}}=shelter,je=!1;function Ie(){let[e,t]=J([]),[n,l]=J(""),[d,r]=J(""),[a,c]=J("");je||(je=!0,zt(ke)),Nt(()=>m(this,null,function*(){let i=yield T("get_profile_list");t(i);let p=JSON.parse(yield T("read_config_file"));l(p.profile||"default"),r(p.profile||"default")}));let u=()=>m(this,null,function*(){let i=JSON.parse(yield T("read_config_file"));i.profile=n(),yield T("write_config_file",{contents:JSON.stringify(i)}),Ct.relaunch()}),v=()=>m(this,null,function*(){yield T("delete_profile",{name:n()}),t(e().filter(i=>i!==n())),l(d())}),x=()=>m(this,null,function*(){yield T("create_profile",{name:a()}),e().includes(a())||t([...e(),a()]),l(a())}),P=i=>{c(i)};return[(0,y.createComponent)(Te,{get tag(){return St.H1},children:"Profiles"}),(0,y.createComponent)(I,{get options(){return e().map(i=>({label:i,value:i}))},placeholder:"Select profile...",maxVisibleItems:5,closeOnSelect:!0,onChange:i=>l(i),get selected(){return n()}}),(0,y.createComponent)(Te,{get class(){return k.shead},children:"Create Profile"}),(0,y.createComponent)(Pt,{type:"text",get value(){return a()},onInput:P,placeholder:"Enter a name for the new profile..."}),(0,y.createComponent)(K,{onClick:x,get class(){return k.sbutton},get disabled(){return a()===""||e().includes(a())},children:"Create Profile"}),(()=>{let i=yt.cloneNode(!0);return(0,Q.insert)(i,(0,y.createComponent)(K,{onClick:u,get class(){return k.splitbutton},children:"Save and Restart"}),null),(0,Q.insert)(i,(0,y.createComponent)(K,{onClick:v,get class(){return k.splitbutton},get disabled(){return n()==="default"||d()===n},children:"Delete Selected Profile"}),null),(0,Ae.effect)(()=>(0,Oe.className)(i,k.pbuttons)),i})()]}var se=s(o(),1),ne=s(o(),1),oe=s(o(),1),R=s(o(),1),Pr=s(o(),1),_=s(o(),1);var Ee=s(o(),1),Me=s(o(),1),Be=s(o(),1),Fe=s(o(),1),Je=s(o(),1);var Re="._card_1uk2u_1{border:1px solid var(--background-tertiary);border-radius:4px}",He={card:"_card_1uk2u_1"};var kt=(0,Ee.template)("<div></div>",2),{ui:{injectCss:Tt}}=shelter,Le=!1,U=e=>(Le||(Le=!0,Tt(Re)),(()=>{let t=kt.cloneNode(!0);return(0,Je.insert)(t,()=>e.children),(0,Fe.effect)(n=>{let l=He.card,d=e.style;return l!==n._v$&&(0,Be.className)(t,n._v$=l),n._v$2=(0,Me.style)(t,d,n._v$2),n},{_v$:void 0,_v$2:void 0}),t})());var te=s(o(),1),Ye=s(o(),1),w=s(o(),1),X=s(o(),1),C=s(o(),1),S=s(o(),1);var Ue="._plist_9zlo0_1{display:flex;flex-direction:column;align-items:center;justify-content:space-between;font-size:16px}._pheader_9zlo0_1{border-bottom:1px solid var(--background-tertiary);font-weight:bold;padding-bottom:16px}._plistrow_9zlo0_1{display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:100%;padding:16px}._plistrow_9zlo0_1 ._scell_9zlo0_1{display:flex;align-items:center;justify-content:center;width:30%}._plistrow_9zlo0_1 ._mcell_9zlo0_1{display:flex;align-items:center;justify-content:flex-start;width:50%}._left16_9zlo0_1{margin-left:16px}._top16_9zlo0_1{margin-top:16px}._top32_9zlo0_1{margin-top:32px}",g={plist:"_plist_9zlo0_1",pheader:"_pheader_9zlo0_1",plistrow:"_plistrow_9zlo0_1",scell:"_scell_9zlo0_1",mcell:"_mcell_9zlo0_1",left16:"_left16_9zlo0_1",top16:"_top16_9zlo0_1",top32:"_top32_9zlo0_1"};var jt=(0,te.template)("<div><div><div></div><div></div><div></div></div></div>",10),Dt=(0,te.template)("<div><div></div><div></div><div></div></div>",8),{ui:{Switch:We,Text:W,injectCss:Ot},solid:{createSignal:At}}=shelter,{invoke:ee}=window.__TAURI__,Ve=!1,It=()=>m(void 0,null,function*(){return yield ee("get_plugin_list")});function qe(){Ve||(Ve=!0,Ot(Ue));let[e,t]=At([]);return m(this,null,function*(){t(yield It())}),(0,S.createComponent)(U,{style:{marginTop:"1rem"},get children(){let n=jt.cloneNode(!0),l=n.firstChild,d=l.firstChild,r=d.nextSibling,a=r.nextSibling;return(0,C.insert)(d,(0,S.createComponent)(W,{get class(){return g.left16},children:"Plugin Name"})),(0,C.insert)(r,(0,S.createComponent)(W,{get class(){return g.left16},children:"Enabled?"})),(0,C.insert)(a,(0,S.createComponent)(W,{get class(){return g.left16},children:"Preload?"})),(0,C.insert)(n,()=>e().map(c=>(()=>{let u=Dt.cloneNode(!0),v=u.firstChild,x=v.nextSibling,P=x.nextSibling;return(0,C.insert)(v,(0,S.createComponent)(W,{get class(){return g.left16},get children(){return c.name}})),(0,C.insert)(x,(0,S.createComponent)(We,{get value(){return!c.disabled},onChange:i=>{ee("toggle_plugin",{name:c.name}),t(e().map(p=>(p.name===c.name&&(p.disabled=!p.disabled),p)))},style:{flexDirection:"column-reverse"}})),(0,C.insert)(P,(0,S.createComponent)(We,{get checked(){return c.preload},onChange:i=>{ee("toggle_preload",{name:c.name}),t(e().map(p=>(p.name===c.name&&(p.preload=!p.preload),p)))}})),(0,X.effect)(i=>{let p=c.name,ae=g.plistrow,ie=g.mcell,le=g.scell,ce=g.scell;return p!==i._v$6&&(0,Ye.setAttribute)(u,"key",i._v$6=p),ae!==i._v$7&&(0,w.className)(u,i._v$7=ae),ie!==i._v$8&&(0,w.className)(v,i._v$8=ie),le!==i._v$9&&(0,w.className)(x,i._v$9=le),ce!==i._v$10&&(0,w.className)(P,i._v$10=ce),i},{_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0}),u})()),null),(0,X.effect)(c=>{let u=g.plist,v=g.pheader+" "+g.plistrow,x=g.mcell,P=g.scell,i=g.scell;return u!==c._v$&&(0,w.className)(n,c._v$=u),v!==c._v$2&&(0,w.className)(l,c._v$2=v),x!==c._v$3&&(0,w.className)(d,c._v$3=x),P!==c._v$4&&(0,w.className)(r,c._v$4=P),i!==c._v$5&&(0,w.className)(a,c._v$5=i),c},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),n}})}var Ge="._shead_1s6h6_1{margin-top:16px;margin-bottom:8px}._fcard_1s6h6_1{display:flex;flex-direction:row;justify-content:space-between;align-items:center;color:var(--text-primary);padding:8px}._pcard_1s6h6_1{display:flex}._left16_1s6h6_1{margin-left:16px}",$={shead:"_shead_1s6h6_1",fcard:"_fcard_1s6h6_1",pcard:"_pcard_1s6h6_1",left16:"_left16_1s6h6_1"};var Ze=(0,se.template)("<div></div>",2),Rt=(0,se.template)('<a href="https://github.com/SpikeHD/shelter-plugins" target="_blank">SpikeHD/shelter-plugins</a>',2),{ui:{SwitchItem:z,Button:re,Text:Ke,Header:N,HeaderTags:Ht,Slider:Lt,injectCss:Et},solid:{createSignal:Qe,createEffect:Mt}}=shelter,{invoke:H,process:Bt}=window.__TAURI__,Xe=!1,Ft=()=>m(void 0,null,function*(){return(yield H("get_theme_names")).map(t=>({label:t.replace(/"/g,"").replace(".css","").replace(".theme",""),value:t.replace(/"/g,"")}))}),Jt=()=>{H("open_plugins")},Ut=()=>{H("open_themes")};function et(){let[e,t]=Qe({zoom:"1.0",client_type:"default",sys_tray:!1,push_to_talk:!1,push_to_talk_keys:[],theme:"none",use_native_titlebar:!1,start_maximized:!1,open_on_startup:!1,startup_minimized:!1,autoupdate:!1,update_notify:!0}),[n,l]=Qe([]);Xe||(Xe=!0,Et(Ge)),Mt(()=>m(this,null,function*(){t(JSON.parse(yield H("read_config_file"))),l(yield Ft())}));let d=()=>m(this,null,function*(){yield H("write_config_file",{contents:JSON.stringify(e())}),Bt.relaunch()});return[(0,_.createComponent)(N,{get tag(){return Ht.H1},children:"Dorion Settings"}),(0,_.createComponent)(N,{get class(){return $.shead},children:"Theme"}),(0,_.createComponent)(I,{get value(){return e().theme},onChange:r=>{t(a=>h(f({},a),{theme:r.target.value}))},placeholder:"Select a theme...",get options(){return[{label:"None",value:"none"},...n()]},get selected(){return e().theme}}),(0,_.createComponent)(N,{get class(){return $.shead},children:"Client Type"}),(0,_.createComponent)(I,{options:[{label:"Default",value:"default"},{label:"Canary",value:"canary"},{label:"PTB",value:"ptb"}],placeholder:"Select a client type...",maxVisibleItems:5,closeOnSelect:!0,onChange:r=>{t(a=>h(f({},a),{client_type:r.target.value}))},get selected(){return e().client_type}}),(0,_.createComponent)(N,{get class(){return $.shead},children:"Window"}),(0,_.createComponent)(Lt,{min:50,max:125,get steps(){return Array.from(Array(16).keys()).map(r=>r*5+50+"%")},step:5,get value(){return parseFloat(e().zoom)*100},onInput:r=>{t(a=>h(f({},a),{zoom:(parseFloat(r)/100).toString()}))}}),(0,_.createComponent)(z,{get value(){return e().sys_tray},onChange:r=>{t(a=>h(f({},a),{sys_tray:r}))},note:"Instead of closing, Dorion will run in the background and will be accessible via the system tray.",children:"Minimize to System Tray"}),(0,_.createComponent)(z,{get value(){return e().start_maximized},onChange:r=>{t(a=>h(f({},a),{start_maximized:r}))},children:"Start Maximized"}),(0,_.createComponent)(N,{get class(){return $.shead},children:"Startup"}),(0,_.createComponent)(z,{get value(){return e().open_on_startup},onChange:r=>{t(a=>h(f({},a),{open_on_startup:r}))},note:"Open Dorion when your system starts.",children:"Open on Startup"}),(0,_.createComponent)(z,{get value(){return e().startup_minimized},get disabled(){return!e().open_on_startup},onChange:r=>{t(a=>h(f({},a),{startup_minimized:r}))},note:"Open in the background when your system starts.",children:"Start Minimized"}),(0,_.createComponent)(N,{get class(){return $.shead},children:"Misc."}),(0,_.createComponent)(z,{get value(){return e().use_native_titlebar},onChange:r=>{t(a=>h(f({},a),{use_native_titlebar:r}))},note:"Disable the custom titlebar and use your systems native one instead.",children:"Use Native Titlebar"}),(0,_.createComponent)(z,{get value(){return e().autoupdate},onChange:r=>{t(a=>h(f({},a),{autoupdate:r}))},get note(){return["Automatically update various Dorion components, such as"," ",Rt.cloneNode(!0),"."]},children:"Autoupdate"}),(0,_.createComponent)(z,{get value(){return e().update_notify===void 0||e().update_notify},onChange:r=>{t(a=>h(f({},a),{update_notify:r}))},get disabled(){return e().autoupdate},children:"Notify me of updates"}),(0,_.createComponent)(U,{style:{marginTop:"1rem"},get children(){return[(()=>{let r=Ze.cloneNode(!0);return(0,R.insert)(r,(0,_.createComponent)(Ke,{get class(){return $.left16},children:"Plugins Folder"}),null),(0,R.insert)(r,(0,_.createComponent)(re,{onClick:Jt,children:"Open"}),null),(0,oe.effect)(()=>(0,ne.className)(r,$.fcard)),r})(),(()=>{let r=Ze.cloneNode(!0);return(0,R.insert)(r,(0,_.createComponent)(Ke,{get class(){return $.left16},children:"Themes Folder"}),null),(0,R.insert)(r,(0,_.createComponent)(re,{onClick:Ut,children:"Open"}),null),(0,oe.effect)(()=>(0,ne.className)(r,$.fcard)),r})()]}}),(0,_.createComponent)(N,{get class(){return $.shead},children:"Plugins"}),(0,_.createComponent)(qe,{}),(0,_.createComponent)(re,{onClick:d,style:{"margin-top":"1rem",padding:"18px"},grow:!0,children:"Save & Restart"})]}var{settings:{registerSection:L}}=shelter,Wt=[L("divider"),L("header","Dorion"),L("section","dorion-settings","Dorion Settings",et),L("section","dorion-performance","Performance & Extras",be),L("section","dorion-profiles","Profiles",Ie)],Vt=()=>{Wt.forEach(e=>e())};return dt(Yt);})();
