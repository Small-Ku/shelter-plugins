(()=>{var T=Object.create;var d=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var x=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty;var k=(e,o)=>()=>(o||e((o={exports:{}}).exports,o),o.exports),D=(e,o)=>{for(var n in o)d(e,n,{get:o[n],enumerable:!0})},f=(e,o,n,t)=>{if(o&&typeof o=="object"||typeof o=="function")for(let a of b(o))!U.call(e,a)&&a!==n&&d(e,a,{get:()=>o[a],enumerable:!(t=_(o,a))||t.enumerable});return e};var M=(e,o,n)=>(n=e!=null?T(x(e)):{},f(o||!e||!e.__esModule?d(n,"default",{value:e,enumerable:!0}):n,e)),v=e=>f(d({},"__esModule",{value:!0}),e);var h=(e,o,n)=>new Promise((t,a)=>{var g=r=>{try{c(n.next(r))}catch(l){a(l)}},C=r=>{try{c(n.throw(r))}catch(l){a(l)}},c=r=>r.done?t(r.value):Promise.resolve(r.value).then(g,C);c((n=n.apply(e,o)).next())});var y=k((G,m)=>{m.exports=shelter.solidWeb});var B={};D(B,{onUnload:()=>$});var i=M(y(),1);var{ui:{openModal:u,ModalRoot:w,ModalHeader:A,ModalBody:N,ModalConfirmFooter:O}}=shelter,{invoke:s,process:R,event:S}=window.__TAURI__,p=e=>(0,i.createComponent)(w,{get children(){return[(0,i.createComponent)(A,{get close(){return e.onCancel},get children(){return e.header}}),(0,i.createComponent)(N,{get children(){return e.body}}),(0,i.createComponent)(O,{get onConfirm(){return e.onConfirm},get onCancel(){return e.onCancel},get confirmText(){return e.confirmText},get cancelText(){return e.cancelText},get type(){return e.type}})]}}),W=()=>h(void 0,null,function*(){console.log("[Updater] Checking for updates...");let e=JSON.parse(yield s("read_config_file")),o=yield s("update_check"),n=()=>{s("do_update",{toUpdate:o})};if(console.log(`[Updater] Dorion things to update: ${o}`),!(e.update_notify!==void 0&&!e.update_notify)){if(o.includes("vencordorion")||o.includes("dorion")){if(e.autoupdate){if(o.includes("dorion")){u(t=>p({header:"Dorion Update",body:"A Dorion update has been fetched, and Dorion will restart momentarily.",confirmText:"Got it!",type:"neutral",onConfirm:()=>n(),onCancel:t.close}));return}n();return}u(t=>p({header:"Updates Available!",body:"There are Dorion updates available. Would you like to apply them? This notification can be disabled in Dorion Settings",confirmText:"Yes please!",cancelText:"Nope!",type:"neutral",onConfirm:()=>n(),onCancel:t.close}))}S.once("update_complete",()=>{u(t=>p({header:"Update Complete!",body:"The update has been applied! Please restart to apply the changes.",confirmText:"Okay!",type:"neutral",onConfirm:()=>R.relaunch(),onCancel:t.close}))})}}),$=()=>{};W();return v(B);})();
