(()=>{var l=Object.defineProperty,O=Object.defineProperties,T=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertyNames,S=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var p=(i,e,t)=>e in i?l(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,b=(i,e)=>{for(var t in e||={})N.call(e,t)&&p(i,t,e[t]);if(S)for(var t of S(e))E.call(e,t)&&p(i,t,e[t]);return i},w=(i,e)=>O(i,m(e));var I=(i,e)=>{for(var t in e)l(i,t,{get:e[t],enumerable:!0})},v=(i,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of C(e))!N.call(i,n)&&n!==t&&l(i,n,{get:()=>e[n],enumerable:!(s=T(e,n))||s.enumerable});return i};var R=i=>v(l({},"__esModule",{value:!0}),i);var g=(i,e,t)=>new Promise((s,n)=>{var c=o=>{try{r(t.next(o))}catch(f){n(f)}},a=o=>{try{r(t.throw(o))}catch(f){n(f)}},r=o=>o.done?s(o.value):Promise.resolve(o.value).then(c,a);r((t=t.apply(i,e)).next())});var G={};I(G,{onUnload:()=>D});var{ui:{Switch:U},util:{reactFiberWalker:k,getFiber:A},flux:{dispatcher:h},solid:{createSignal:F},observeDom:P,patcher:x}=shelter,{invoke:u,notification:_}=window.__TAURI__,d=!1,y='div[class*="contentColumn"] div[class*="container"] div[class*="control"]';h.subscribe("USER_SETTINGS_MODAL_SET_SECTION",i=>g(void 0,null,function*(){if(i.section!=="Notifications"){d=!1;return}else if(d)return;d=!0;let[e,t]=F(JSON.parse(yield u("read_config_file"))),s=P(y,n=>{s.now();let c=k(A(n),"onChange",!1);console.log(c),x.instead("onChange",c==null?void 0:c.pendingProps,([a,r])=>{console.log(a),console.log(r),console.log(void 0),t(w(b({},e),{desktop_notifications:a})),u("write_config_file",{contents:JSON.stringify(e())})})})}));h.subscribe("RPC_NOTIFICATION_CREATE",i=>g(void 0,null,function*(){let e=yield _.isPermissionGranted();if(e||(console.log("Requesting permission..."),e=(yield _.requestPermission())==="granted"),!e)return console.log("No permissions!");JSON.parse(yield u("read_config_file")).desktop_notifications&&_.sendNotification({title:i.title,body:i.body,icon:i.icon})}));var D=()=>{};return R(G);})();
