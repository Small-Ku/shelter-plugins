(()=>{var k=Object.create;var c=Object.defineProperty,v=Object.defineProperties,x=Object.getOwnPropertyDescriptor,D=Object.getOwnPropertyDescriptors,U=Object.getOwnPropertyNames,N=Object.getOwnPropertySymbols,F=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var T=(e,t,n)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,I=(e,t)=>{for(var n in t||={})E.call(t,n)&&T(e,n,t[n]);if(N)for(var n of N(t))L.call(t,n)&&T(e,n,t[n]);return e},g=(e,t)=>v(e,D(t));var G=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),H=(e,t)=>{for(var n in t)c(e,n,{get:t[n],enumerable:!0})},b=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of U(t))!E.call(e,o)&&o!==n&&c(e,o,{get:()=>t[o],enumerable:!(i=x(t,o))||i.enumerable});return e};var J=(e,t,n)=>(n=e!=null?k(F(e)):{},b(t||!e||!e.__esModule?c(n,"default",{value:e,enumerable:!0}):n,e)),M=e=>b(c({},"__esModule",{value:!0}),e);var a=(e,t,n)=>new Promise((i,o)=>{var A=s=>{try{f(n.next(s))}catch(_){o(_)}},R=s=>{try{f(n.throw(s))}catch(_){o(_)}},f=s=>s.done?i(s.value):Promise.resolve(s.value).then(A,R);f((n=n.apply(e,t)).next())});var h=G((Q,C)=>{C.exports=shelter.solidWeb});var B={};H(B,{onLoad:()=>q,onUnload:()=>z});var O=J(h(),1);var{ui:{SwitchItem:P},flux:{dispatcher:l},solid:{createSignal:j},observeDom:W,patcher:V}=shelter,{invoke:p,notification:X}=window.__TAURI__,[d,w]=j(null),$='div[class*="contentColumn"] div[class*="container"]',r=null,u=!1,S=!1,m=e=>a(void 0,null,function*(){if(e.section!=="Notifications"){u=!1,S=!1;return}else if(u)return;u=!0,r=W($,t=>{if(r.now(),t.style.display="none",S)return;let n=(0,O.createComponent)(P,{note:"If you're looking for per-channel or per-server notifications, right-click the desired server icon and select Notification Settings.",get value(){var i;return(i=d())==null?void 0:i.desktop_notifications},onChange:i=>a(void 0,null,function*(){w(g(I({},d()),{desktop_notifications:i})),yield p("write_config_file",{contents:JSON.stringify(d())})}),children:"Enable Desktop Notifications"});t.parentElement.prepend(n),S=!0})}),y=e=>{p("send_notification",{title:e.title,body:e.body,icon:e.icon})};l.subscribe("USER_SETTINGS_MODAL_SET_SECTION",m);l.subscribe("RPC_NOTIFICATION_CREATE",y);var q=()=>a(void 0,null,function*(){w(JSON.parse(yield p("read_config_file")))}),z=()=>{r==null||r.now(),l.unsubscribe("USER_SETTINGS_MODAL_SET_SECTION",m),l.unsubscribe("RPC_NOTIFICATION_CREATE",y)};return M(B);})();
