(()=>{var k=Object.create;var c=Object.defineProperty,v=Object.defineProperties,x=Object.getOwnPropertyDescriptor,D=Object.getOwnPropertyDescriptors,U=Object.getOwnPropertyNames,N=Object.getOwnPropertySymbols,F=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var T=(t,e,n)=>e in t?c(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,I=(t,e)=>{for(var n in e||={})E.call(e,n)&&T(t,n,e[n]);if(N)for(var n of N(e))L.call(e,n)&&T(t,n,e[n]);return t},g=(t,e)=>v(t,D(e));var G=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),H=(t,e)=>{for(var n in e)c(t,n,{get:e[n],enumerable:!0})},b=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of U(e))!E.call(t,o)&&o!==n&&c(t,o,{get:()=>e[o],enumerable:!(i=x(e,o))||i.enumerable});return t};var J=(t,e,n)=>(n=t!=null?k(F(t)):{},b(e||!t||!t.__esModule?c(n,"default",{value:t,enumerable:!0}):n,t)),M=t=>b(c({},"__esModule",{value:!0}),t);var a=(t,e,n)=>new Promise((i,o)=>{var A=s=>{try{f(n.next(s))}catch(_){o(_)}},R=s=>{try{f(n.throw(s))}catch(_){o(_)}},f=s=>s.done?i(s.value):Promise.resolve(s.value).then(A,R);f((n=n.apply(t,e)).next())});var w=G((X,h)=>{h.exports=shelter.solidWeb});var Q={};H(Q,{onLoad:()=>B,onUnload:()=>K});var C=J(w(),1);var{ui:{SwitchItem:P},flux:{dispatcher:l},solid:{createSignal:j},observeDom:W,patcher:$}=shelter,{invoke:p}=window.__TAURI__,[d,O]=j(null),q='div[class*="contentColumn"] div[class*="container"]',z=$.instead("Notification",window,()=>{}),r=null,u=!1,S=!1,m=t=>a(void 0,null,function*(){if(t.section!=="Notifications"){u=!1,S=!1;return}else if(u)return;u=!0,r=W(q,e=>{if(r.now(),e.style.display="none",S)return;let n=(0,C.createComponent)(P,{note:"If you're looking for per-channel or per-server notifications, right-click the desired server icon and select Notification Settings.",get value(){var i;return(i=d())==null?void 0:i.desktop_notifications},onChange:i=>a(void 0,null,function*(){O(g(I({},d()),{desktop_notifications:i})),yield p("write_config_file",{contents:JSON.stringify(d())})}),children:"Enable Desktop Notifications"});e.parentElement.prepend(n),S=!0})}),y=t=>{p("send_notification",{title:t.title,body:t.body,icon:t.icon})};l.subscribe("USER_SETTINGS_MODAL_SET_SECTION",m);l.subscribe("RPC_NOTIFICATION_CREATE",y);var B=()=>a(void 0,null,function*(){O(JSON.parse(yield p("read_config_file")))}),K=()=>{r==null||r.now(),l.unsubscribe("USER_SETTINGS_MODAL_SET_SECTION",m),l.unsubscribe("RPC_NOTIFICATION_CREATE",y),z()};return M(Q);})();
